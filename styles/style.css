:root {
  --bg: #0f1226;
  --panel: #171a32;
  --primary: #6be675;
  --accent: #7ab7ff;
  --danger: #ff6b6b;
  --text: #e6e9f0;
  --muted: #9aa3b2;
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Noto Sans, Ubuntu, Cantarell, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  color: var(--text);
  background: radial-gradient(1200px 600px at 60% -20%, #21264d 0%, var(--bg) 60%);
  background-attachment: fixed;
}

.app-header, .app-footer {
  background: var(--panel);
  border-bottom: 1px solid #2a2f52;
  padding: 12px 16px;
}
.app-footer { border-top: 1px solid #2a2f52; border-bottom: none; }

.app-header h1 { margin: 0 0 8px; font-size: 22px; letter-spacing: 0.5px; font-weight: 700; }
.controls, .status { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }
.status { margin-top: 8px; gap: 16px; }
.toggle { display: inline-flex; align-items: center; gap: 6px; }

.game-root { padding: 16px; min-height: calc(100vh - 170px); display: grid; place-items: center; }
.loader { color: var(--muted); padding: 8px 10px; background: rgba(20,23,50,0.6); border: 1px solid #2a2f52; border-radius: 6px; animation: pulse 1.4s ease-in-out infinite; }
.fade-out { animation: fadeOut 0.2s ease forwards; }
.message { margin-top: 12px; color: var(--accent); min-height: 1.2em; }

@keyframes pulse {
  0%, 100% { opacity: 0.65; }
  50% { opacity: 1; }
}
@keyframes fadeOut { to { opacity: 0; transform: translateY(-4px); } }
.message { margin-top: 12px; color: var(--accent); min-height: 1.2em; }

.card {
  background: linear-gradient(180deg, #1d2242 0%, #141732 100%);
  border: 1px solid #2a2f52;
  border-radius: 14px;
  padding: 16px;
  box-shadow: 0 8px 24px rgba(0,0,0,0.35);
  transform: translateY(4px);
  animation: popIn 220ms ease-out both;
}

@keyframes popIn { from { opacity: 0; transform: translateY(10px) scale(0.98); } to { opacity: 1; transform: translateY(0) scale(1); } }

.vocab-panel { display: grid; gap: 12px; place-items: center; }
.vocab-image { width: min(52vw, 340px); height: min(52vw, 340px); object-fit: contain; border-radius: 12px; background: #0e1020; border: 1px dashed #2a2f52; }
.vocab-word { margin: 8px 0 0; color: var(--muted); font-size: 14px; }

.boss-bar { display: flex; gap: 6px; }
.heart { width: 18px; height: 18px; background: var(--danger); clip-path: path("M12 21s-8-4.438-8-10A4 4 0 0 1 12 5a4 4 0 0 1 8 6c0 5.562-8 10-8 10z"); opacity: 0.35; }
.heart.alive { opacity: 1; }

.door-locks { display: flex; gap: 8px; }
.lock { width: 18px; height: 18px; border-radius: 4px; background: #2b315a; border: 1px solid #3a437b; position: relative; }
.lock.open { background: #2b5a35; border-color: #3d8f55; }
.lock::after { content: ""; position: absolute; width: 8px; height: 8px; border-radius: 999px; border: 2px solid #888; top: -6px; left: 3px; }
.lock.open::after { border-color: #6be675; transform: translateX(6px); }

.speech-controls { display: flex; align-items: center; gap: 8px; }
button { background: #2a2f52; color: var(--text); border: 1px solid #39407a; border-radius: 8px; padding: 8px 12px; cursor: pointer; }
button:hover { background: #343b74; }
input { background: #12142b; color: var(--text); border: 1px solid #2a2f52; border-radius: 8px; padding: 8px 12px; min-width: 220px; }

.hud { display: flex; gap: 12px; align-items: center; justify-content: center; margin-top: 8px; }
.last-heard { color: var(--muted); }

.tools-grid { display: grid; grid-template-columns: repeat(3, minmax(90px, 1fr)); gap: 12px; }
.tool-card { text-align: center; padding: 10px; border-radius: 12px; border: 1px solid #2a2f52; background: #131634; cursor: pointer; transition: transform .12s ease, box-shadow .12s ease; }
.tool-card:hover { transform: translateY(-2px); box-shadow: 0 8px 16px rgba(0,0,0,0.35); }
.tool-card.selected { outline: 2px solid var(--accent); }

.toast { position: fixed; right: 16px; bottom: 16px; background: #141732; padding: 10px 12px; border: 1px solid #2a2f52; border-radius: 8px; color: var(--text); opacity: 0.95; }

@media (max-width: 600px) {
  .vocab-image { width: 80vw; height: 80vw; }
}


